const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LazyChart-RMxC8eQx.js","assets/vendor-utils-BvnoZmc1.js","assets/vendor-charts-BWzhTumR.js","assets/vendor-react-Bzgz95E1.js"])))=>i.map(i=>d[i]);
import{j as e,v as $,C as q,A as w,h as k,x as G,n as z,y as R,z as C,M as F,E as Y,G as D,u as H,r as V,H as K,D as W,J as X}from"./vendor-utils-BvnoZmc1.js";import{r as f,R as Z}from"./vendor-charts-BWzhTumR.js";import{u as p,_ as ee,R as B}from"./index-BkbvGRTa.js";import{T as O,L as U}from"./Layout-BnSst0lw.js";import{b as J,B as _,C as h,T as M,c as se,d as ae}from"./DesignSystem-yXEZWEmR.js";import"./vendor-react-Bzgz95E1.js";import"./Logo-BXS1PHDR.js";const te=({onNext:a})=>{const{activeScenario:r,t:s,language:l}=p(),n=l==="he";return r?e.jsxs("div",{className:"max-w-5xl mx-auto animate-fade-in pb-10",children:[e.jsx("div",{className:"bg-white rounded-3xl shadow-xl shadow-surface-200/50 overflow-hidden border border-surface-100 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-stretch",children:[e.jsxs("div",{className:"w-full md:w-2/5 relative min-h-[300px] md:min-h-full",children:[e.jsx("img",{src:r.opening.imageUrl||"./placeholder.svg",alt:"Scenario",className:"absolute inset-0 w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent md:bg-gradient-to-r md:from-transparent md:to-black/5"})]}),e.jsxs("div",{className:"w-full md:w-3/5 p-8 md:p-12 flex flex-col justify-center bg-white",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 mb-6",children:[e.jsxs(J,{color:"blue",children:[e.jsx($,{size:12,className:"mr-1.5"})," ",r.category]}),e.jsxs(J,{color:"gray",children:[e.jsx(q,{size:12,className:"mr-1.5"})," ",r.duration]})]}),e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-surface-900 mb-4 leading-tight tracking-tight",children:r.title}),e.jsx("p",{className:"text-lg text-surface-600 leading-relaxed mb-8",children:r.opening.description}),e.jsx(_,{onClick:a,size:"lg",rightIcon:n?e.jsx(w,{size:18}):e.jsx(k,{size:18}),className:"w-fit shadow-lg shadow-surface-200 hover:shadow-primary-200 hover:-translate-y-0.5",children:s("start_simulation")})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl p-6 border border-surface-100 shadow-sm h-full",children:[e.jsxs("h4",{className:"font-bold text-surface-900 flex items-center gap-2 mb-4 text-sm uppercase tracking-wider",children:[e.jsx(G,{size:16,className:"text-primary-600"})," ",s("learning_goals")]}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"mt-0.5 text-secondary-500 shrink-0",children:e.jsx(z,{size:16})}),e.jsx("span",{className:"text-sm text-surface-600 font-medium",children:s("data_analysis")})]}),e.jsxs("li",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"mt-0.5 text-secondary-500 shrink-0",children:e.jsx(z,{size:16})}),e.jsx("span",{className:"text-sm text-surface-600 font-medium",children:s("critical_analysis")})]}),e.jsxs("li",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"mt-0.5 text-secondary-500 shrink-0",children:e.jsx(z,{size:16})}),e.jsx("span",{className:"text-sm text-surface-600 font-medium",children:s("decide")})]})]})]}),e.jsxs("div",{className:"md:col-span-2 bg-white rounded-2xl p-6 border border-surface-100 shadow-sm h-full flex flex-col justify-center",children:[e.jsxs("h4",{className:"font-bold text-surface-900 flex items-center gap-2 mb-5 text-sm uppercase tracking-wider",children:[e.jsx(R,{size:16,className:"text-primary-600"})," ",s("simulation_process")]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-surface-50 w-full sm:w-auto flex-1 border border-surface-100",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-white text-primary-600 flex items-center justify-center shrink-0 shadow-sm border border-surface-100",children:e.jsx($,{size:18})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-surface-900 text-sm",children:s("analyze")}),e.jsx("p",{className:"text-xs text-surface-500",children:s("identify_trends")})]})]}),e.jsx("div",{className:"hidden sm:flex text-surface-300",children:n?e.jsx(w,{size:20}):e.jsx(k,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-surface-50 w-full sm:w-auto flex-1 border border-surface-100",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-white text-secondary-600 flex items-center justify-center shrink-0 shadow-sm border border-surface-100",children:e.jsx(C,{size:18})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-surface-900 text-sm",children:s("decide")}),e.jsx("p",{className:"text-xs text-surface-500",children:s("evidence_based")})]})]}),e.jsx("div",{className:"hidden sm:flex text-surface-300",children:n?e.jsx(w,{size:20}):e.jsx(k,{size:20})}),e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-surface-50 w-full sm:w-auto flex-1 border border-surface-100",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-white text-accent-600 flex items-center justify-center shrink-0 shadow-sm border border-surface-100",children:e.jsx(F,{size:18})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-bold text-surface-900 text-sm",children:s("reflection")}),e.jsx("p",{className:"text-xs text-surface-500",children:s("improvement")})]})]})]})]})]})]}):null},S=({title:a,step:r,subtitle:s,helpText:l})=>{const{t:n}=p();return e.jsxs("div",{className:"flex flex-col gap-2 mb-8 animate-fade-in-up",children:[e.jsxs("div",{className:"flex items-center gap-3 text-primary-600 font-bold tracking-wider text-xs uppercase rtl:flex-row-reverse",children:[e.jsx("span",{className:"flex items-center justify-center w-6 h-6 rounded-full bg-primary-100 text-primary-700",children:r}),e.jsxs("span",{children:[n("step")," ",r," ",n("of")," 6"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-surface-900 tracking-tight",children:a}),l&&e.jsx(O,{content:l})]}),s&&e.jsx("p",{className:"text-surface-500 max-w-2xl",children:s})]})},I=({onNext:a,onPrev:r,disabled:s=!1,nextLabel:l})=>{const{t:n,language:t}=p(),c=t==="he";return e.jsxs("div",{className:"flex justify-between items-center pt-8 border-t border-surface-100 mt-10",children:[e.jsx(_,{variant:"ghost",onClick:r,icon:c?k:w,iconPosition:"left",children:n("back")}),e.jsx(_,{variant:"primary",onClick:a,disabled:s,icon:c?w:k,iconPosition:"right",className:"px-8 py-3 text-base",children:l||n("continue")})]})},re=({onNext:a,onPrev:r})=>{const{activeScenario:s,t:l}=p();return s?e.jsxs("div",{className:"max-w-6xl mx-auto animate-fade-in",children:[e.jsx(S,{title:l("mission_brief"),step:1,helpText:l("understand_problem")}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-start",children:[e.jsxs("div",{className:"space-y-8",children:[e.jsxs(h,{className:"shadow-xl shadow-surface-200/50 relative overflow-hidden group border-l-8 border-l-blue-500",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-2xl font-extrabold text-surface-900",children:l("core_problem")}),e.jsx(O,{content:l("ai_hint")||"Read the problem statement carefully.",children:e.jsx(Y,{size:20,className:"text-surface-400 hover:text-primary-500 transition-colors cursor-help"})})]}),e.jsx("p",{className:"text-lg text-surface-600 leading-relaxed",children:s.problem.text})]}),e.jsx(h,{className:"!bg-purple-50 !border-purple-100 shadow-sm",children:e.jsxs("div",{className:"flex gap-5 items-start",children:[e.jsx("div",{className:"bg-white p-3 rounded-2xl text-purple-500 shrink-0 shadow-sm border border-purple-100",children:e.jsx(C,{size:28})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-purple-900 mb-2 text-lg",children:l("contextual_info")}),e.jsx("p",{className:"text-purple-800/80 leading-relaxed",children:s.problem.context})]})]})})]}),e.jsxs("div",{className:"relative h-[400px] rounded-3xl overflow-hidden shadow-2xl border-8 border-white ring-1 ring-surface-900/5 rotate-1 hover:rotate-0 transition-all duration-500",children:[e.jsx("img",{src:s.problem.imageUrl||"./placeholder.svg",className:"absolute inset-0 w-full h-full object-cover",alt:"Problem Context"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent"})]})]}),e.jsx(I,{onNext:a,onPrev:r})]}):null},le=Z.lazy(()=>ee(()=>import("./LazyChart-RMxC8eQx.js"),__vite__mapDeps([0,1,2,3]))),ie=({onNext:a,onPrev:r})=>{const{activeScenario:s,t:l,language:n}=p();return s?e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(S,{title:l("data_analysis"),step:2,helpText:l("analyze_data_help")}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(h,{className:"lg:col-span-2 p-8 shadow-xl shadow-surface-200/50",children:[e.jsx("div",{className:"flex justify-between items-center mb-8",children:e.jsxs("h3",{className:"text-xl font-bold text-surface-900 flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg text-primary-600",children:e.jsx($,{size:20})}),s.data.description]})}),e.jsx("div",{className:"h-[400px] w-full",children:e.jsx(f.Suspense,{fallback:e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-surface-50 rounded-xl",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-primary-500 border-t-transparent"})}),children:e.jsx(le,{type:s.data.chartType,data:s.data.chartData})})})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(h,{className:"!bg-surface-900 text-white shadow-xl",children:[e.jsxs("h4",{className:"font-bold text-lg mb-6 flex items-center gap-2",children:[e.jsx(C,{size:20,className:"text-secondary-400"}),l("key_facts")]}),e.jsx("ul",{className:"space-y-4",children:s.data.facts?s.data.facts.map((t,c)=>e.jsxs("li",{className:"flex gap-3 text-sm leading-relaxed text-surface-300",children:[e.jsx("span",{className:"text-primary-400 font-bold mt-0.5",children:"â€¢"}),t]},c)):e.jsx("li",{className:"text-surface-400 italic text-sm",children:l("no_facts")})})]}),e.jsxs(h,{className:"shadow-lg",children:[e.jsx("h4",{className:"font-bold text-surface-900 mb-3 text-sm uppercase tracking-wider",children:l("analysis_tip")}),e.jsx("p",{className:"text-sm text-surface-500 leading-relaxed",children:l("analysis_tip_content")})]})]})]}),e.jsx(I,{onNext:a,onPrev:r})]}):null},ne=({onNext:a,onPrev:r})=>{const{activeScenario:s,activeSession:l,updateSessionResponse:n,t}=p(),[c,x]=f.useState((l==null?void 0:l.responses.analysisFeedback)||null),[o,b]=f.useState(!1);if(!s||!l)return null;const g=async(m,i)=>{const u=l.responses.analysis[m];if(u&&u.length>10&&!c){b(!0);const N=await se(i,u,s.analysis.keyTerms);x(N),n("analysisFeedback",N),b(!1)}};return e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx(S,{title:t("critical_analysis"),step:3,helpText:t("answer_questions_help")}),e.jsxs("div",{className:"grid gap-8",children:[e.jsx("div",{className:"space-y-6",children:s.analysis.questions.map((m,i)=>e.jsxs(h,{className:"p-8 shadow-lg shadow-surface-200/50 transition-all focus-within:ring-4 focus-within:ring-primary-100 focus-within:border-primary-300",children:[e.jsxs("label",{className:"block text-lg font-bold text-surface-800 mb-4 flex gap-3 items-start",children:[e.jsx("span",{className:"bg-surface-100 text-surface-500 w-8 h-8 flex items-center justify-center rounded-lg text-sm shrink-0 font-mono mt-0.5",children:i+1}),e.jsx("span",{className:"flex-1",children:m}),e.jsx(O,{content:t("ai_hint")||"Analyze the data carefully before answering.",children:e.jsx(Y,{size:18,className:"text-surface-400 hover:text-primary-500 transition-colors cursor-help mt-1"})})]}),e.jsx(M,{className:"bg-surface-50 border-surface-200 focus:bg-white min-h-[140px] text-base leading-relaxed",placeholder:t("type_answer_help"),value:l.responses.analysis[i]||"",onChange:u=>n("analysis",{[i]:u.target.value}),onBlur:()=>g(i,m)})]},i))}),e.jsxs("div",{className:"min-h-[120px]",children:[o&&e.jsxs("div",{className:"flex items-center gap-4 text-primary-600 animate-pulse bg-primary-50/80 backdrop-blur-sm p-5 rounded-2xl w-fit border border-primary-100",children:[e.jsxs("div",{className:"relative",children:[e.jsx(R,{size:24}),e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-primary-500 rounded-full animate-ping"})]}),e.jsx("span",{className:"font-bold tracking-wide text-sm uppercase",children:t("analyzing")})]}),c&&e.jsxs(h,{className:"bg-gradient-to-br from-primary-50 to-primary-100 border-primary-100 shadow-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/40 rounded-full -mr-10 -mt-10 blur-2xl"}),e.jsxs("div",{className:"flex gap-5 relative z-10",children:[e.jsx("div",{className:"bg-white p-3 rounded-2xl shadow-sm h-fit text-primary-600 shrink-0",children:e.jsx(R,{size:28})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-primary-900 mb-2 text-lg",children:t("ai_feedback")}),e.jsx("p",{className:"text-primary-800/90 leading-relaxed text-base",children:c})]})]})]})]})]}),e.jsx(I,{onNext:a,onPrev:r,disabled:Object.keys(l.responses.analysis).length===0})]})},ce=({onNext:a,onPrev:r})=>{const{activeScenario:s,activeSession:l,updateSessionResponse:n,t}=p(),[c,x]=f.useState((l==null?void 0:l.responses.solutionJustification)||""),[o,b]=f.useState((l==null?void 0:l.responses.solutionId)||null);if(!s)return null;const g=i=>{b(i),n("solutionId",i)},m=i=>{x(i.target.value),n("solutionJustification",i.target.value)};return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsx(S,{title:t("proposed_solution"),step:4}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:s.solutions.options.map((i,u)=>e.jsxs("div",{onClick:()=>g(i.id),className:`cursor-pointer group relative p-8 rounded-3xl border-2 transition-all duration-300 h-full flex flex-col justify-between ${o===i.id?"border-primary-600 bg-primary-50/30 shadow-2xl shadow-primary-200/50 scale-[1.02]":"border-surface-100 bg-white hover:border-primary-200 hover:shadow-xl hover:shadow-surface-200/50 hover:-translate-y-1"}`,children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsx("span",{className:`inline-flex items-center justify-center w-10 h-10 rounded-xl text-lg font-bold transition-colors ${o===i.id?"bg-primary-600 text-white shadow-lg shadow-primary-300":"bg-surface-100 text-surface-500 group-hover:bg-primary-100 group-hover:text-primary-600"}`,children:String.fromCharCode(65+u)}),o===i.id&&e.jsx("div",{className:"text-primary-600 animate-scale-in",children:e.jsx(z,{size:28,fill:"currentColor",className:"text-white"})})]}),e.jsxs("h4",{className:`font-bold text-xl mb-4 transition-colors ${o===i.id?"text-primary-900":"text-surface-900"}`,children:[t("option")," ",u+1]}),e.jsx("p",{className:"text-surface-600 leading-relaxed",children:i.text})]}),e.jsx("div",{className:`mt-6 pt-6 border-t border-dashed transition-colors ${o===i.id?"border-primary-200":"border-surface-100"}`,children:e.jsx("span",{className:`text-xs font-bold uppercase tracking-wider ${o===i.id?"text-primary-600":"text-surface-400"}`,children:o===i.id?t("selected"):t("click_to_select")})})]},i.id))}),o&&e.jsx("div",{className:"animate-fade-in-up",children:e.jsxs(h,{className:"p-8 shadow-xl shadow-surface-200/50",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"bg-primary-100 p-3 rounded-2xl text-primary-600",children:e.jsx(F,{size:24})}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xl font-bold text-surface-900 block",children:t("justify_choice")}),e.jsx("p",{className:"text-surface-500 text-sm",children:t("justify_choice_help")})]})]}),e.jsx(M,{className:"bg-surface-50 border-surface-200 focus:bg-white min-h-[150px] text-base",placeholder:"...",value:c,onChange:m})]})}),e.jsx(I,{onNext:a,onPrev:r,disabled:!o||!c,nextLabel:t("run_simulation")})]})},oe=({onNext:a})=>{const{activeScenario:r,activeSession:s,updateSessionResponse:l,t:n,language:t}=p(),[c,x]=f.useState(!0),[o,b]=f.useState((s==null?void 0:s.responses.solutionFeedback)||null),g=t==="he";if(!r||!s)return null;const m=r.solutions.options.find(u=>u.id===s.responses.solutionId),i=m?r.simulation.results[m.resultId]:null;return f.useEffect(()=>{(async()=>{if(!s.responses.solutionFeedback&&m){await new Promise(A=>setTimeout(A,2e3));const N=await ae(m.text,s.responses.solutionJustification||"",r.problem.context);b(N),l("solutionFeedback",N)}x(!1)})()},[]),c?e.jsxs("div",{className:"flex flex-col items-center justify-center h-[600px] space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsx("div",{className:"absolute inset-0 border-4 border-surface-100 rounded-full"}),e.jsx("div",{className:"absolute inset-0 border-4 border-primary-600 rounded-full border-t-transparent animate-spin"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx($,{className:"text-primary-600 animate-pulse",size:32})})]}),e.jsxs("div",{className:"text-center space-y-3",children:[e.jsx("h3",{className:"text-3xl font-extrabold text-surface-900 tracking-tight",children:n("run_simulation")}),e.jsx("p",{className:"text-surface-500 text-lg",children:n("analyzing")})]})]}):e.jsxs("div",{className:"max-w-5xl mx-auto space-y-12",children:[e.jsx(S,{title:n("simulation_results"),step:5}),i&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-stretch",children:[e.jsxs(h,{className:`!overflow-hidden !rounded-3xl border-2 transition-all duration-500 shadow-2xl flex flex-col justify-center p-10 relative ${i.outcomeType==="success"?"!bg-purple-50/50 !border-purple-200":i.outcomeType==="neutral"?"!bg-amber-50/50 !border-amber-200":"!bg-red-50/50 !border-red-200"}`,children:[e.jsx("div",{className:`absolute top-0 right-0 w-64 h-64 rounded-full -mr-16 -mt-16 blur-3xl opacity-50 ${i.outcomeType==="success"?"bg-purple-200":i.outcomeType==="neutral"?"bg-amber-200":"bg-red-200"}`}),e.jsxs("div",{className:`relative z-10 text-center ${i.outcomeType==="success"?"text-purple-900":i.outcomeType==="neutral"?"text-amber-900":"text-red-900"}`,children:[e.jsx("div",{className:`mx-auto w-24 h-24 rounded-full flex items-center justify-center mb-8 shadow-sm ${i.outcomeType==="success"?"bg-purple-100 text-purple-600":i.outcomeType==="neutral"?"bg-amber-100 text-amber-600":"bg-red-100 text-red-600"}`,children:i.outcomeType==="success"?e.jsx(z,{size:48}):e.jsx(D,{size:48})}),e.jsx("h2",{className:"text-4xl font-extrabold mb-6 tracking-tight",children:i.summary}),e.jsx("p",{className:"text-xl opacity-90 leading-relaxed",children:i.detail})]})]}),e.jsxs("div",{className:"relative h-full min-h-[400px] rounded-3xl overflow-hidden shadow-2xl border-8 border-white ring-1 ring-surface-900/5",children:[e.jsx("img",{src:i.outcomeImageUrl||r.problem.imageUrl||"./placeholder.svg",className:"absolute inset-0 w-full h-full object-cover",alt:"Simulation Outcome"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent"}),e.jsx("div",{className:"absolute bottom-6 left-6 right-6 text-white",children:e.jsxs("div",{className:"inline-flex items-center gap-2 bg-black/50 backdrop-blur-md px-4 py-2 rounded-full text-sm font-bold border border-white/10",children:[e.jsx($,{size:16}),n("visual_outcome")]})})]})]}),o&&e.jsxs("div",{className:"relative group animate-fade-in-up",children:[e.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-primary-600 to-primary-600 rounded-3xl opacity-20 group-hover:opacity-30 transition duration-500 blur"}),e.jsxs(h,{className:"relative p-8 shadow-xl flex flex-col md:flex-row gap-8 items-start !rounded-3xl",children:[e.jsx("div",{className:"bg-primary-50 p-4 rounded-2xl text-primary-600 shrink-0 border border-primary-100",children:e.jsx(R,{size:32})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-xl font-bold text-surface-900",children:n("ai_feedback")}),e.jsx("p",{className:"text-surface-600 leading-relaxed text-lg",children:o})]})]})]}),e.jsx("div",{className:"flex justify-end pt-8",children:e.jsx(_,{variant:"primary",onClick:a,className:"px-10 py-4 text-lg !rounded-2xl shadow-lg shadow-surface-200 hover:shadow-xl hover:shadow-primary-200 hover:-translate-y-1",icon:g?w:k,iconPosition:"right",children:n("reflection")})})]})},de=()=>{const{activeScenario:a,activeSession:r,updateSessionResponse:s,resetSimulation:l,scenarios:n,t,language:c}=p(),x=H(),[o,b]=f.useState(!1),g=c==="he";if(!a||!r)return null;const m=n.findIndex(v=>v.id===a.id),i=n[m+1],u=()=>{l(),x({to:"/dashboard"})},N=()=>{i&&x({to:"/simulation/$scenarioId",params:{scenarioId:i.id},search:{step:0}})},A=Math.round((Date.now()-r.startedAt)/6e4),j=a.solutions.options.find(v=>v.id===r.responses.solutionId),d=j?a.simulation.results[j.resultId]:null,Q=()=>{const v=`
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    STEM SIMULATION REPORT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ðŸ“‹ SCENARIO DETAILS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Title: ${a.title}
Category: ${a.category}
Duration: ${a.duration}
Date: ${new Date(r.startedAt).toLocaleDateString()}
Time Spent: ${A} minutes
Session ID: ${r.id.slice(0,8)}

ðŸ“ PROBLEM STATEMENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
${a.problem.text}

Context: ${a.problem.context}

ðŸ“Š YOUR ANALYSIS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
${a.analysis.questions.map((E,y)=>`
Q${y+1}: ${E}
A${y+1}: ${r.responses.analysis[y]||"Not answered"}
`).join(`
`)}

AI Feedback: ${r.responses.analysisFeedback||"N/A"}

ðŸ’¡ YOUR SOLUTION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Selected: ${(j==null?void 0:j.text)||"N/A"}
Justification: ${r.responses.solutionJustification||"N/A"}

Result: ${(d==null?void 0:d.summary)||"N/A"}
${(d==null?void 0:d.detail)||""}

AI Feedback: ${r.responses.solutionFeedback||"N/A"}

ðŸ”„ REFLECTION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
${a.reflection.questions.map((E,y)=>`
Q${y+1}: ${E}
A${y+1}: ${r.responses.reflection[y]||"Not answered"}
`).join(`
`)}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                    Powered by STEM Simulator
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        `,T=new Blob([v],{type:"text/plain"}),L=URL.createObjectURL(T),P=document.createElement("a");P.href=L,P.download=`simulation-report-${a.title.replace(/\s+/g,"-")}-${r.id.slice(0,8)}.txt`,P.click(),b(!0)};return e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx(S,{title:t("reflection"),step:6}),e.jsx("div",{className:"space-y-8 mb-16",children:a.reflection.questions.map((v,T)=>e.jsxs(h,{className:"p-8 shadow-lg shadow-surface-200/50 transition-all focus-within:ring-4 focus-within:ring-primary-100 focus-within:border-primary-300",children:[e.jsx("label",{className:"block text-lg font-bold text-surface-800 mb-4",children:v}),e.jsx(M,{className:"bg-surface-50 border-surface-200 focus:bg-white min-h-[120px] text-base",placeholder:t("type_answer_help"),value:r.responses.reflection[T]||"",onChange:L=>s("reflection",{[T]:L.target.value})})]},T))}),e.jsxs(h,{className:"p-10 shadow-xl shadow-surface-200/50 mb-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary-50 rounded-full -mr-20 -mt-20 blur-3xl"}),e.jsxs("h3",{className:"text-2xl font-bold text-surface-900 mb-8 flex items-center gap-3 relative z-10",children:[e.jsx("div",{className:"bg-primary-100 p-2 rounded-lg text-primary-600",children:e.jsx(V,{size:24})}),t("session_summary")]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 relative z-10",children:[e.jsxs("div",{className:"text-center p-6 bg-surface-50 rounded-2xl border border-surface-100 hover:shadow-md transition-all",children:[e.jsx(q,{size:28,className:"mx-auto text-primary-500 mb-3"}),e.jsx("p",{className:"text-3xl font-extrabold text-surface-900 mb-1",children:A}),e.jsx("p",{className:"text-sm font-medium text-surface-500 uppercase tracking-wide",children:t("mins")})]}),e.jsxs("div",{className:"text-center p-6 bg-surface-50 rounded-2xl border border-surface-100 hover:shadow-md transition-all",children:[e.jsx(F,{size:28,className:"mx-auto text-primary-500 mb-3"}),e.jsx("p",{className:"text-3xl font-extrabold text-surface-900 mb-1",children:Object.keys(r.responses.analysis).length}),e.jsx("p",{className:"text-sm font-medium text-surface-500 uppercase tracking-wide",children:t("questions_answered")})]}),e.jsxs("div",{className:"text-center p-6 bg-surface-50 rounded-2xl border border-surface-100 hover:shadow-md transition-all",children:[e.jsx(C,{size:28,className:"mx-auto text-amber-500 mb-3"}),e.jsxs("p",{className:"text-xl font-bold text-surface-900 truncate mb-1",children:[j==null?void 0:j.text.slice(0,15),"..."]}),e.jsx("p",{className:"text-sm font-medium text-surface-500 uppercase tracking-wide",children:t("solution_selected")})]}),e.jsxs("div",{className:"text-center p-6 bg-surface-50 rounded-2xl border border-surface-100 hover:shadow-md transition-all",children:[(d==null?void 0:d.outcomeType)==="success"?e.jsx(z,{size:28,className:"mx-auto text-secondary-500 mb-3"}):(d==null?void 0:d.outcomeType)==="neutral"?e.jsx(D,{size:28,className:"mx-auto text-amber-500 mb-3"}):e.jsx(D,{size:28,className:"mx-auto text-accent-500 mb-3"}),e.jsx("p",{className:"text-xl font-bold text-surface-900 mb-1",children:d==null?void 0:d.summary}),e.jsx("p",{className:"text-sm font-medium text-surface-500 uppercase tracking-wide",children:t("outcome")})]})]})]}),e.jsxs(h,{className:"!bg-surface-900 text-white p-12 !rounded-[2.5rem] text-center space-y-8 shadow-2xl shadow-surface-900/20 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/5 rounded-full -mr-24 -mt-24 blur-3xl"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-primary-500/20 rounded-full -ml-24 -mb-24 blur-3xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 bg-gradient-to-br from-secondary-400 to-secondary-500 rounded-3xl rotate-3 flex items-center justify-center shadow-lg shadow-secondary-900/20",children:e.jsx(K,{size:48,className:"text-white -rotate-3"})}),e.jsx("h2",{className:"text-4xl font-extrabold mb-4 tracking-tight",children:(d==null?void 0:d.outcomeType)==="success"?t("congratulations"):t("good_job")}),e.jsx("p",{className:"text-surface-400 max-w-lg mx-auto text-xl leading-relaxed",children:t("completed_module")}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-5 pt-10",children:[e.jsx(_,{onClick:Q,variant:o?"secondary":"outline",className:`px-8 py-4 text-lg !rounded-2xl ${o?"":"!bg-white !text-surface-900 !border-none shadow-lg"}`,icon:o?z:W,children:t(o?"report_saved":"download_report")}),i&&e.jsx(_,{onClick:N,variant:"primary",className:"px-8 py-4 text-lg !rounded-2xl shadow-lg",icon:g?w:k,iconPosition:"right",children:t("next_scenario")}),e.jsx(_,{onClick:u,variant:"ghost",className:"px-8 py-4 text-lg !rounded-2xl border !border-surface-700 !text-surface-300 hover:!bg-surface-800 hover:!text-white",icon:X,children:t("return_dashboard")})]})]})]})]})},xe=({currentStep:a,onStepChange:r})=>{const{t:s,language:l}=p(),n=l==="he",t=()=>{r(Math.min(a+1,6))},c=()=>{r(Math.max(a-1,0))},x=a/6*100;return e.jsxs("div",{className:"pb-20 relative",children:[e.jsx("div",{className:"sticky top-0 z-40 bg-white/95 backdrop-blur-sm py-6 mb-8 border-b border-surface-200/50 -mx-6 sm:-mx-8 lg:-mx-10 px-6 sm:px-8 lg:px-10 transition-all",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"flex justify-between text-xs font-bold text-surface-400 uppercase tracking-widest mb-2",children:[e.jsx("span",{className:a>=0?"text-primary-600":"",children:s("start")}),e.jsx("span",{className:a>=2?"text-primary-600":"",children:s("analyze")}),e.jsx("span",{className:a>=4?"text-primary-600":"",children:s("decide")}),e.jsx("span",{className:a>=6?"text-primary-600":"",children:s("finish")})]}),e.jsx("div",{className:"h-2.5 w-full bg-surface-200 rounded-full overflow-hidden",dir:"ltr",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-primary-600 shadow-lg shadow-primary-500/50 transition-all duration-700 ease-out relative",style:{width:`${Math.max(5,x)}%`,marginLeft:n?"auto":0,marginRight:n?0:"auto"},children:e.jsx("div",{className:"absolute right-0 top-0 h-full w-full bg-white/20 animate-pulse-soft"})})})]})}),e.jsxs("div",{className:"min-h-[600px] max-w-7xl mx-auto",children:[a===0&&e.jsx(te,{onNext:t}),a===1&&e.jsx(re,{onNext:t,onPrev:c}),a===2&&e.jsx(ie,{onNext:t,onPrev:c}),a===3&&e.jsx(ne,{onNext:t,onPrev:c}),a===4&&e.jsx(ce,{onNext:t,onPrev:c}),a===5&&e.jsx(oe,{onNext:t}),a===6&&e.jsx(de,{})]})]})},ge=()=>{const{scenarioId:a}=B.useParams(),{step:r}=B.useSearch(),{scenarios:s,startSimulation:l,activeScenario:n}=p(),t=H({from:"/simulation/$scenarioId"}),c=x=>{t({search:{step:x}})};return f.useEffect(()=>{const x=s.find(o=>o.id===a);x&&(!n||n.id!==a)?l(a):x||t({to:"/dashboard"})},[a,s,l,n,t]),n?e.jsx(U,{children:e.jsx(xe,{currentStep:r,onStepChange:c})}):e.jsx(U,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-500 border-t-transparent"})})})};export{ge as component};
