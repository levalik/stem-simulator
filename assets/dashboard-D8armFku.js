import{u as G,j as e,P as T,F as C,X as A,B as _,T as F,C as P,A as I,e as O}from"./vendor-utils-iSm6uNaf.js";import{u as R}from"./index-ncLKpKBc.js";import{r as d}from"./vendor-charts-BXv77sc1.js";import{L as B}from"./Layout-C6z0PA-Q.js";import"./vendor-react-Bzgz95E1.js";import"./Logo-BeP3QnJv.js";const H=()=>{var j,y;const{scenarios:m,t,language:S,currentUser:o}=R(),h=G(),k=S==="he",[x,E]=d.useState(""),[l,f]=d.useState([]),[u,z]=d.useState(!0),L=d.useMemo(()=>{const s=new Set;return m.forEach(r=>{r.disciplines?r.disciplines.forEach(a=>s.add(a)):r.category&&r.category.split("/").forEach(a=>s.add(a.trim()))}),Array.from(s).sort()},[m]),p=d.useMemo(()=>m.filter(s=>{var n;const r=(s.title||s.topic||"").toLowerCase().includes(x.toLowerCase())||(((n=s.opening)==null?void 0:n.description)||"").toLowerCase().includes(x.toLowerCase()),a=s.disciplines||(s.category?s.category.split("/").map(c=>c.trim()):[]),i=l.length===0||l.some(c=>a.includes(c));return r&&i}),[m,x,l]),D=s=>{f(r=>r.includes(s)?r.filter(a=>a!==s):[...r,s])},$=s=>{h({to:"/simulation/$scenarioId",params:{scenarioId:s}})},g={מתמטיקה:"Mathematics",פיזיקה:"Physics",כימיה:"Chemistry",ביולוגיה:"Biology",גיאוגרפיה:"Geography",הנדסה:"Engineering",אקולוגיה:"Ecology","תכנון עירוני":"Urban Planning",רפואה:"Medicine",קינמטיקה:"Kinematics","חקר ביצועים":"Operations Research",כלכלה:"Economics",ניהול:"Management","חינוך פיננסי":"Financial Education","מדעי הסביבה":"Environmental Science","איכות הסביבה":"Environmental Quality",חשבון:"Arithmetic",שברים:"Fractions"},b=s=>{if(!s)return"";const r=g[s]||s,i=`discipline_${r.toLowerCase().replace(/ /g,"_")}`,n=t?t(i):null;return n&&!n.startsWith("discipline_")?n:g[s]?s:r},M=s=>{if(!s)return t("general")||"General";const r=s.match(/Grade\s*(\d+)/i);if(r){const i=r[1];return`${t("grade")||"Grade"} ${i}`}const a=s.match(/כיתה\s*(\d+)/i);if(a){const i=a[1];return`${t("grade")||"Grade"} ${i}`}return s};return e.jsx(B,{children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-end justify-between gap-6 pb-6 border-b border-surface-200/50",children:[e.jsx("div",{className:"space-y-2 animate-fade-in-up",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary-500 to-primary-600 flex items-center justify-center text-white font-bold text-lg shadow-lg shadow-primary-200",children:((j=o==null?void 0:o.name)==null?void 0:j.charAt(0))||"U"}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-extrabold text-surface-900 tracking-tight",children:[t("welcome"),", ",((y=o==null?void 0:o.name)==null?void 0:y.split(" ")[0])||t("teacher")]}),e.jsx("p",{className:"text-surface-500",children:t("manage_scenarios_desc")||"Manage and organize your lesson scenarios"})]})]})}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:()=>h({to:"/admin"}),className:"px-4 py-2 bg-primary-600 text-white rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-primary-700 transition-colors shadow-lg shadow-primary-200",children:[e.jsx(T,{size:18})," ",t("create_new_scenario")]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-surface-200 shadow-sm space-y-4 animate-fade-in-up",style:{animationDelay:"200ms"},children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(C,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-surface-400 rtl:left-auto rtl:right-3"}),e.jsx("input",{type:"text",placeholder:t("search_scenarios")||"Search scenarios...",className:"w-full pl-10 pr-4 rtl:pr-10 rtl:pl-4 py-2.5 bg-surface-50 border border-surface-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all",value:x,onChange:s=>E(s.target.value)})]}),e.jsxs("button",{onClick:()=>z(!u),className:`px-4 py-2.5 rounded-xl transition-all flex items-center gap-2 font-bold text-sm shadow-sm ${u||l.length>0?"bg-gradient-to-r from-primary-500 to-primary-600 text-white border border-primary-500":"bg-surface-100 border border-surface-200 text-surface-700 hover:bg-surface-200"}`,children:[e.jsx(C,{size:16}),e.jsx("span",{children:t("filter")}),l.length>0&&e.jsx("span",{className:"bg-white/20 text-white text-xs px-1.5 py-0.5 rounded-full min-w-[1.25rem] text-center",children:l.length})]})]}),(u||l.length>0)&&e.jsx("div",{className:"pt-3 border-t border-surface-100 animate-slide-down",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[L.map(s=>e.jsx("button",{onClick:()=>D(s),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${l.includes(s)?"bg-primary-600 text-white shadow-md shadow-primary-200":"bg-surface-100 text-surface-600 hover:bg-surface-200 border border-surface-200"}`,children:b(s)},s)),l.length>0&&e.jsxs("button",{onClick:()=>f([]),className:"px-3 py-1.5 rounded-full text-sm font-medium text-red-600 bg-red-50 hover:bg-red-100 transition-all flex items-center gap-1 border border-red-200 ml-auto rtl:mr-auto rtl:ml-0",children:[e.jsx(A,{size:14})," ",t("clear_all")]})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map((s,r)=>{var i,n,c,w,N;const a=((n=(i=s.tasks)==null?void 0:i[0])==null?void 0:n.coverImage)||((c=s.opening)==null?void 0:c.imageUrl);return e.jsxs("div",{onClick:()=>$(s.id),className:"group bg-surface-50 rounded-3xl border border-surface-100 shadow-sm hover:shadow-xl hover:border-primary-200 transition-all duration-300 overflow-hidden flex flex-col h-full animate-fade-in-up cursor-pointer",style:{animationDelay:`${(r+1)*100}ms`},children:[e.jsxs("div",{className:"relative h-48 overflow-hidden bg-surface-200",children:[a?e.jsx("img",{src:a,alt:s.topic||s.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-surface-400",children:e.jsx(_,{size:48})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-60"}),e.jsx("div",{className:"absolute top-4 left-4 rtl:left-auto rtl:right-4",children:e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-bold bg-white/90 backdrop-blur-sm text-surface-600 shadow-sm",children:[e.jsx(F,{size:12,className:"text-primary-500"})," ",M(s.grade)]})})]}),e.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[e.jsx("h3",{className:"text-xl font-bold text-surface-900 mb-2 group-hover:text-primary-600 transition-colors",children:s.topic||s.title}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[(w=s.disciplines)==null?void 0:w.slice(0,3).map(v=>e.jsx("span",{className:"text-xs bg-surface-100 text-surface-600 px-2 py-1 rounded-md border border-surface-200",children:b(v)},v)),(((N=s.disciplines)==null?void 0:N.length)||0)>3&&e.jsxs("span",{className:"text-xs bg-surface-100 text-surface-600 px-2 py-1 rounded-md border border-surface-200",children:["+",s.disciplines.length-3]})]}),e.jsxs("div",{className:"flex items-center justify-between mt-auto pt-4 border-t border-surface-200",children:[e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-lg text-xs font-bold bg-white text-surface-600 border border-surface-200",children:[e.jsx(P,{size:14})," ",s.duration," ",t("minutes")]}),e.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 rounded-xl bg-surface-900 text-white text-sm font-bold transition-all shadow-lg shadow-surface-200 group-hover:bg-primary-600",children:[t("view_plan")||"View Plan"," ",k?e.jsx(I,{size:16}):e.jsx(O,{size:16})]})]})]})]},s.id)})}),p.length===0&&e.jsxs("div",{className:"text-center py-20 bg-surface-50 rounded-3xl border border-dashed border-surface-300 animate-fade-in",children:[e.jsx("div",{className:"w-16 h-16 bg-white rounded-full flex items-center justify-center mx-auto mb-4 text-surface-400 shadow-sm",children:e.jsx(_,{size:32})}),e.jsx("h3",{className:"text-lg font-bold text-surface-900",children:t("no_scenarios_found")}),e.jsx("p",{className:"text-surface-500",children:t("try_adjusting_search")})]})]})})};export{H as component};
