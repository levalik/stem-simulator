import{j as e,G as L,C as S,B as p,i as _,t as T,u as B}from"./vendor-utils-iSm6uNaf.js";import{r as u}from"./vendor-charts-BXv77sc1.js";import{u as I,R as z}from"./index-ncLKpKBc.js";import{L as C}from"./Layout-C6z0PA-Q.js";import"./vendor-react-Bzgz95E1.js";import"./Logo-BeP3QnJv.js";const E=({scenario:s})=>{var h,g,b,j,v,N,y,w,k;const{t,language:m}=I(),o=r=>{if(!r)return"";const l=r.split(" ");if(l.length<2)return r;const c=`grade_${l[1]}`;return t&&t(c)||r},i=r=>{if(!r)return"";const c=`discipline_${r.toLowerCase().replace(/ /g,"_")}`;return t&&t(c)||r},a=s.tasks&&s.tasks.length>0?s.tasks:[{id:"legacy_task",discipline:s.category?s.category.split("/")[0].trim():t("disciplines")||"General",description:[(h=s.problem)==null?void 0:h.text,(g=s.problem)==null?void 0:g.context,(b=s.data)==null?void 0:b.description].filter(Boolean).join(`

`),solution:((N=(v=(j=s.solutions)==null?void 0:j.options)==null?void 0:v.find(r=>r.correct))==null?void 0:N.text)||((w=(y=s.solutions)==null?void 0:y.options)==null?void 0:w.map(r=>r.text).join(`
`))||t("no_solution"),coverImage:(k=s.opening)==null?void 0:k.imageUrl}],x=s.disciplines&&s.disciplines.length>0?s.disciplines:s.category?s.category.split("/").map(r=>r.trim()):[],[n,f]=u.useState(0);u.useEffect(()=>{n>=a.length&&f(Math.max(a.length-1,0))},[a.length,n]);const d=a[n]||a[0];return e.jsxs("div",{className:"max-w-5xl mx-auto pb-20 animate-fade-in",children:[e.jsxs("div",{className:"bg-white rounded-3xl p-8 shadow-sm border border-surface-200 mb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-primary-50 rounded-full -mr-16 -mt-16 blur-3xl opacity-50"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-start justify-between gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold text-surface-900 mb-4 leading-tight",children:s.topic||s.title}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-surface-600",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-surface-100 px-4 py-2 rounded-xl text-sm font-bold",children:[e.jsx(L,{size:18,className:"text-primary-600"}),e.jsx("span",{children:o(s.grade||t("grade")+" 9")})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-surface-100 px-4 py-2 rounded-xl text-sm font-bold",children:[e.jsx(S,{size:18,className:"text-primary-600"}),e.jsxs("span",{children:[s.duration," ",t("minutes")]})]}),e.jsxs("div",{className:"flex items-center gap-2 bg-surface-100 px-4 py-2 rounded-xl text-sm font-bold",children:[e.jsx(p,{size:18,className:"text-primary-600"}),e.jsxs("span",{children:[x.length," ",t("disciplines")]})]})]})]}),e.jsx("div",{className:"hidden md:block",children:e.jsx("div",{className:"w-16 h-16 bg-primary-50 rounded-2xl flex items-center justify-center text-primary-600",children:e.jsx(p,{size:32})})})]}),e.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded-2xl p-6 text-blue-900",children:[e.jsxs("h3",{className:"font-bold text-lg mb-2 flex items-center gap-2",children:[e.jsx(_,{size:20,className:"text-blue-600"}),t("teacher_guide_mode")]}),e.jsx("p",{className:"opacity-90 leading-relaxed",children:t("teacher_guide_desc")})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-surface-900 px-2",children:t("task_generation")}),e.jsx("div",{className:"flex flex-wrap gap-3 bg-white rounded-3xl border border-surface-200 p-4 overflow-x-auto",children:a.map((r,l)=>{const c=l===n;return e.jsxs("button",{onClick:()=>f(l),className:`px-4 py-2 rounded-2xl border transition-all text-left min-w-[140px] ${c?"bg-surface-900 text-white border-surface-900 shadow-lg shadow-surface-400":"bg-surface-50 text-surface-600 border-surface-200 hover:border-primary-200"}`,children:[e.jsxs("span",{className:"block text-[11px] uppercase tracking-wider font-bold text-surface-400",children:[t("task_generation")||"Task"," #",l+1]}),e.jsx("span",{className:"text-base font-semibold",children:i(r.discipline)})]},r.id||l)})})]}),d&&e.jsx("div",{className:"bg-white rounded-3xl shadow-sm border border-surface-200 overflow-hidden transition-all hover:shadow-md group",children:e.jsxs("div",{className:"flex flex-col md:flex-row",children:[e.jsxs("div",{className:"md:w-1/3 min-h-[250px] bg-surface-100 relative overflow-hidden",children:[d.coverImage?e.jsx("img",{src:d.coverImage,alt:d.discipline,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-surface-300 bg-surface-50",children:e.jsx(p,{size:64,className:"opacity-20"})}),e.jsx("div",{className:"absolute top-4 left-4 rtl:left-auto rtl:right-4 bg-white/95 backdrop-blur-md px-4 py-2 rounded-xl shadow-sm font-bold text-surface-900 text-sm border border-surface-100/50",children:i(d.discipline)})]}),e.jsxs("div",{className:"flex-1 p-8 flex flex-col gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 text-surface-900 font-bold text-xl mb-4",children:[e.jsx("div",{className:"bg-primary-100 p-2 rounded-xl text-primary-600",children:e.jsx(T,{size:20})}),t("task_problem")]}),e.jsx("div",{className:"text-surface-700 leading-relaxed text-lg whitespace-pre-line",children:d.description||t("no_description")||"No description provided."})]}),e.jsx("div",{className:"h-px bg-surface-100 w-full"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 text-green-700 font-bold text-xl mb-4",children:[e.jsx("div",{className:"bg-green-100 p-2 rounded-xl text-green-600",children:e.jsx(_,{size:20})}),t("solution"),e.jsx("span",{className:"text-sm font-medium bg-green-100 px-2 py-0.5 rounded-md text-green-700",children:t("teacher_only")})]}),e.jsx("div",{className:"text-surface-700 leading-relaxed bg-green-50/50 p-6 rounded-2xl border border-green-100/50 text-lg whitespace-pre-line",children:d.solution||t("no_solution")||"No solution provided."})]})]})]})})]})]})},K=()=>{const{scenarioId:s}=z.useParams(),{step:t}=z.useSearch(),{scenarios:m,startSimulation:o,activeScenario:i}=I(),a=B({from:"/simulation/$scenarioId"});return u.useEffect(()=>{const x=m.find(n=>n.id===s);x&&(!i||i.id!==s)?o(s):x||a({to:"/dashboard"})},[s,m,o,i,a]),i?e.jsx(C,{children:e.jsx(E,{scenario:i})}):e.jsx(C,{children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-primary-500 border-t-transparent"})})})};export{K as component};
