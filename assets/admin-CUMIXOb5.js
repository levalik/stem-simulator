import{j as e,U as E,P as ne,i as ce,k as q,S as M,m as oe,n as ae,W as A,X as de,o as $,p as te,e as O,q as xe,r as re,I as me,s as ue,t as he,D as pe,v as fe,T as Q,C as je,L as ge,w as be}from"./vendor-utils-BvnoZmc1.js";import{L as ve}from"./Layout-DwC8q_qY.js";import{r as N,b as H,B as Ne,C as ye,X as we,Y as _e,T as Z,L as Ce,c as ee,P as Se,d as ke,e as se}from"./vendor-charts-BWzhTumR.js";import{u as U}from"./index-BlB6aN_C.js";import{B as _,T as L,I as z,g as ze,a as Te}from"./DesignSystem-yXEZWEmR.js";import"./Logo-BXS1PHDR.js";import"./vendor-react-Bzgz95E1.js";const Ie=({scenario:a,onEdit:i,onDelete:h,t:s})=>e.jsxs("div",{className:"group bg-white p-4 rounded-2xl border border-surface-200 shadow-sm hover:shadow-lg hover:border-primary-200 transition-all duration-300 flex flex-col md:flex-row gap-6 items-center",children:[e.jsx("div",{className:"w-full md:w-32 h-32 bg-surface-100 rounded-xl overflow-hidden shrink-0 relative",children:e.jsx("img",{src:a.opening.imageUrl||"./placeholder.svg",alt:a.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),e.jsxs("div",{className:"flex-1 text-center md:text-start rtl:md:text-right w-full",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-2 items-center md:items-start rtl:md:items-start mb-2",children:[e.jsx("h3",{className:"text-xl font-bold text-surface-900 group-hover:text-primary-600 transition-colors",children:a.title}),e.jsx("span",{className:"px-2.5 py-0.5 bg-primary-50 text-primary-700 text-xs font-bold rounded-full border border-primary-100 uppercase tracking-wide",children:a.category})]}),e.jsx("p",{className:"text-surface-500 text-sm line-clamp-2 mb-3",children:a.opening.description}),e.jsxs("div",{className:"flex items-center justify-center md:justify-start rtl:md:justify-start gap-4 text-xs text-surface-400 font-medium",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(E,{size:14})," 120 ",s("users")]}),e.jsx("span",{className:"flex items-center gap-1",children:"•"}),e.jsx("span",{children:a.duration})]})]}),e.jsxs("div",{className:"flex gap-2 w-full md:w-auto justify-center",children:[e.jsx("button",{onClick:()=>i(a),className:"p-2.5 text-surface-500 hover:text-primary-600 hover:bg-primary-50 rounded-xl transition-colors border border-transparent hover:border-primary-100",title:s("tooltip_edit_scenario"),children:e.jsx(ne,{size:20})}),e.jsx("button",{onClick:()=>h(a.id),className:"p-2.5 text-surface-500 hover:text-accent-600 hover:bg-accent-50 rounded-xl transition-colors border border-transparent hover:border-accent-100",title:s("tooltip_delete_scenario"),children:e.jsx(ce,{size:20})})]})]}),Ae=({onViewCreate:a,onEdit:i,onDelete:h})=>{const{scenarios:s,t:r}=U(),[x,p]=N.useState(""),C=s.filter(m=>m.title.toLowerCase().includes(x.toLowerCase())||m.category.toLowerCase().includes(x.toLowerCase()));return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-extrabold text-surface-900 tracking-tight",children:r("scenario_library")}),e.jsx("p",{className:"text-surface-500 text-sm mt-1",children:r("manage_scenarios_desc")||"Manage and organize your training modules"})]}),e.jsxs("button",{onClick:a,className:"w-full md:w-auto bg-surface-900 text-white px-6 py-3 rounded-xl text-sm font-bold hover:bg-surface-800 transition-colors shadow-lg shadow-surface-200 flex items-center justify-center gap-2",children:[e.jsx(q,{size:18})," ",r("create_new")]})]}),e.jsx("div",{className:"bg-white p-4 rounded-2xl border border-surface-200 shadow-sm flex gap-4",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-surface-400 rtl:left-auto rtl:right-3",size:20}),e.jsx("input",{type:"text",placeholder:r("search_scenarios")||"Search scenarios...",className:"w-full pl-10 pr-4 rtl:pr-10 rtl:pl-4 py-2.5 bg-surface-50 border border-surface-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all",value:x,onChange:m=>p(m.target.value)})]})}),e.jsx("div",{className:"grid gap-4",children:C.length>0?C.map(m=>e.jsx(Ie,{scenario:m,onEdit:i,onDelete:h,t:r},m.id)):e.jsxs("div",{className:"text-center py-20 bg-white rounded-3xl border border-dashed border-surface-300",children:[e.jsx("div",{className:"w-16 h-16 bg-surface-50 rounded-full flex items-center justify-center mx-auto mb-4 text-surface-400",children:e.jsx(M,{size:32})}),e.jsx("h3",{className:"text-lg font-bold text-surface-900",children:r("no_scenarios_found")}),e.jsx("p",{className:"text-surface-500",children:r("try_adjusting_search")})]})})]})},Le=[{value:"פיזיקה / מדעי הסביבה",label:{en:"Physics / Environmental Science",he:"פיזיקה / מדעי הסביבה"}},{value:"אקולוגיה / תכנון עירוני",label:{en:"Ecology / Urban Planning",he:"אקולוגיה / תכנון עירוני"}},{value:"הנדסה / פיזיקה",label:{en:"Engineering / Physics",he:"הנדסה / פיזיקה"}},{value:"מתמטיקה / חקר ביצועים",label:{en:"Mathematics / Operations Research",he:"מתמטיקה / חקר ביצועים"}},{value:"ביולוגיה / רפואה",label:{en:"Biology / Medicine",he:"ביולוגיה / רפואה"}},{value:"פיזיקה / קינמטיקה",label:{en:"Physics / Kinematics",he:"פיזיקה / קינמטיקה"}},{value:"כימיה / איכות סביבה",label:{en:"Chemistry / Environmental Quality",he:"כימיה / איכות סביבה"}},{value:"מדעי המחשב / אלגוריתמים",label:{en:"Computer Science / Algorithms",he:"מדעי המחשב / אלגוריתמים"}},{value:"גיאוגרפיה / אקלים",label:{en:"Geography / Climate",he:"גיאוגרפיה / אקלים"}}],Pe=[{value:"10 דקות",label:{en:"10 minutes",he:"10 דקות"}},{value:"15 דקות",label:{en:"15 minutes",he:"15 דקות"}},{value:"20 דקות",label:{en:"20 minutes",he:"20 דקות"}},{value:"25 דקות",label:{en:"25 minutes",he:"25 דקות"}},{value:"30 דקות",label:{en:"30 minutes",he:"30 דקות"}},{value:"45 דקות",label:{en:"45 minutes",he:"45 דקות"}},{value:"60 דקות",label:{en:"60 minutes",he:"60 דקות"}}],Ue=[{value:"bar",label:{en:"Bar Chart",he:"תרשים עמודות"}},{value:"pie",label:{en:"Pie Chart",he:"תרשים עוגה"}},{value:"line",label:{en:"Line Chart",he:"תרשים קווי"}}],De=({onSave:a,onCancel:i,initialData:h})=>{const{t:s,language:r}=U(),[x,p]=N.useState(1),[C,m]=N.useState(!1),[y,T]=N.useState(null),[S,P]=N.useState(""),[l,c]=N.useState(h||{id:crypto.randomUUID(),title:"",category:"",duration:"",opening:{description:"",imageUrl:""},problem:{text:"",context:"",imageUrl:""},data:{description:"",chartType:"bar",chartData:[]},analysis:{questions:[],keyTerms:[]},solutions:{options:[]},simulation:{results:{}},reflection:{questions:[]}}),le=async()=>{if(S.trim()){m(!0);try{const n=await Te(S);n&&c(b=>({...b,...n,id:b.id}))}catch(n){console.error("Failed to generate",n)}finally{m(!1)}}},D=async n=>{const b=S||l.title||"STEM Scenario";T(n);try{const v=await ze(n,b);v&&c(k=>({...k,[n]:{...k[n],...v}}))}catch(v){console.error(`Failed to generate ${n}`,v)}finally{T(null)}},w=(n,b,v)=>{c(k=>({...k,[n]:{...k[n],[b]:v}}))},G=(n,b)=>{c(v=>({...v,[n]:b}))},ie=()=>{var n,b,v,k,B,F,K,Y,V,W,X,J;switch(x){case 1:return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[!h&&e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-2xl border border-purple-100 mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3 text-purple-800 font-bold",children:[e.jsx(A,{size:20}),e.jsx("h3",{children:s("ai_generator")||"AI Scenario Generator"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(z,{placeholder:s("enter_topic")||"Enter a topic (e.g., 'Water Conservation in Urban Areas')",value:S,onChange:t=>P(t.target.value),className:"bg-white"}),e.jsx(_,{onClick:le,isLoading:C,variant:"secondary",leftIcon:e.jsx(A,{size:16}),children:s("generate")||"Generate"})]}),e.jsx("p",{className:"text-xs text-purple-600 mt-2",children:s("ai_hint")||"Powered by Gemini AI. Enter a topic and let AI create the initial structure for you."})]}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary-100 flex items-center justify-center text-primary-600",children:e.jsx(re,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-surface-900",children:s("step_1_opening")}),e.jsx("p",{className:"text-sm text-surface-500",children:"Basic scenario information"})]})]}),e.jsxs("div",{className:"grid gap-5",children:[e.jsx("div",{children:e.jsx(z,{label:s("scenario_title"),value:l.title,onChange:t=>G("title",t.target.value),placeholder:r==="he"?"הכנס כותרת לתרחיש...":s("enter_title")})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-surface-700 mb-2",children:[s("category")," ",e.jsx("span",{className:"text-accent-500",children:"*"})]}),e.jsxs("select",{className:"w-full p-2.5 border border-surface-200 rounded-lg bg-surface-50 focus:bg-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all appearance-none cursor-pointer",value:l.category,onChange:t=>G("category",t.target.value),children:[e.jsx("option",{value:"",children:r==="he"?"בחר קטגוריה...":s("select_category")}),Le.map(t=>e.jsx("option",{value:t.value,children:r==="he"?t.label.he:t.label.en},t.value))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-surface-700 mb-2",children:[s("duration")," ",e.jsx("span",{className:"text-accent-500",children:"*"})]}),e.jsxs("select",{className:"w-full p-2.5 border border-surface-200 rounded-lg bg-surface-50 focus:bg-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all appearance-none cursor-pointer",value:l.duration,onChange:t=>G("duration",t.target.value),children:[e.jsx("option",{value:"",children:r==="he"?"בחר משך...":s("select_duration")}),Pe.map(t=>e.jsx("option",{value:t.value,children:r==="he"?t.label.he:t.label.en},t.value))]})]})]}),e.jsx("div",{children:e.jsx(L,{label:s("scenario_description"),value:(n=l.opening)==null?void 0:n.description,onChange:t=>w("opening","description",t.target.value),placeholder:r==="he"?"תאר את התרחיש בקצרה...":s("brief_description")})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-surface-700 mb-2",children:s("image_url")}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(z,{className:"flex-1",value:(b=l.opening)==null?void 0:b.imageUrl,onChange:t=>w("opening","imageUrl",t.target.value),placeholder:"https://images.unsplash.com/..."}),e.jsx("button",{type:"button",className:"px-4 py-2 bg-surface-100 text-surface-600 rounded-xl hover:bg-surface-200 transition-colors flex items-center gap-2",children:e.jsx(me,{size:18})})]}),e.jsx("p",{className:"text-xs text-surface-400 mt-1.5",children:r==="he"?"השתמש בתמונה מ-Unsplash או כתובת URL אחרת":s("use_image_url")})]})]})]});case 2:return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-surface-900",children:s("step_2_problem")}),e.jsx(_,{size:"sm",variant:"ghost",onClick:()=>D("problem"),isLoading:y==="problem",leftIcon:e.jsx(A,{size:16}),className:"text-purple-600 hover:bg-purple-50",children:s("generate_with_ai")||"Generate with AI"})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(L,{label:s("problem_statement"),value:(v=l.problem)==null?void 0:v.text,onChange:t=>w("problem","text",t.target.value),rows:4}),e.jsx(L,{label:s("context"),value:(k=l.problem)==null?void 0:k.context,onChange:t=>w("problem","context",t.target.value),rows:3}),e.jsx(z,{label:s("image_url"),value:(B=l.problem)==null?void 0:B.imageUrl,onChange:t=>w("problem","imageUrl",t.target.value)})]})]});case 3:return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-100 flex items-center justify-center text-blue-600",children:e.jsx($,{size:20})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-surface-900",children:s("data_analysis")}),e.jsx("p",{className:"text-sm text-surface-500",children:r==="he"?"הגדר את הנתונים שיוצגו לתלמידים":"Configure data to be shown to students"})]}),e.jsx(_,{size:"sm",variant:"ghost",onClick:()=>D("data"),isLoading:y==="data",leftIcon:e.jsx(A,{size:16}),className:"text-purple-600 hover:bg-purple-50 ml-auto",children:s("generate_with_ai")||"Generate with AI"})]}),e.jsxs("div",{className:"grid gap-5",children:[e.jsx(L,{label:s("description"),value:(F=l.data)==null?void 0:F.description,onChange:t=>w("data","description",t.target.value),placeholder:r==="he"?"תאר את הנתונים שיוצגו בתרשים...":"Describe the data to be shown in the chart...",rows:3}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-surface-700 mb-2",children:[s("chart_type")," ",e.jsx("span",{className:"text-accent-500",children:"*"})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Ue.map(t=>{var f;return e.jsxs("button",{type:"button",onClick:()=>w("data","chartType",t.value),className:`p-4 rounded-xl border-2 transition-all flex flex-col items-center gap-2 ${((f=l.data)==null?void 0:f.chartType)===t.value?"border-primary-500 bg-primary-50 text-primary-700":"border-surface-200 bg-white text-surface-600 hover:border-primary-200 hover:bg-primary-50/50"}`,children:[t.value==="bar"&&e.jsx($,{size:24}),t.value==="pie"&&e.jsx(te,{size:24}),t.value==="line"&&e.jsx(O,{size:24}),e.jsx("span",{className:"text-sm font-medium",children:r==="he"?t.label.he:t.label.en})]},t.value)})})]}),e.jsxs("div",{className:"bg-accent-50 border border-accent-100 rounded-xl p-4 flex gap-3",children:[e.jsx(xe,{size:20,className:"text-accent-500 shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-accent-800 font-medium",children:r==="he"?"טיפ":"Tip"}),e.jsx("p",{className:"text-xs text-accent-700",children:r==="he"?"נקודות הנתונים יכולות להיערך בשלב מתקדם יותר או מיובאות מקובץ CSV.":"Data points can be edited in advanced mode or imported from CSV."})]})]})]})]});case 4:return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-surface-900",children:s("critical_analysis")}),e.jsx(_,{size:"sm",variant:"ghost",onClick:()=>D("analysis"),isLoading:y==="analysis",leftIcon:e.jsx(A,{size:16}),className:"text-purple-600 hover:bg-purple-50",children:s("generate_with_ai")||"Generate with AI"})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(L,{label:s("analysis_questions"),helperText:"Separate questions with a new line",value:(K=l.analysis)==null?void 0:K.questions.join(`
`),onChange:t=>w("analysis","questions",t.target.value.split(`
`)),rows:6}),e.jsx(z,{label:s("key_terms"),helperText:"Comma separated",value:(Y=l.analysis)==null?void 0:Y.keyTerms.join(", "),onChange:t=>w("analysis","keyTerms",t.target.value.split(",").map(f=>f.trim()))})]})]});case 5:return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-surface-900",children:s("solution_options")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(_,{size:"sm",variant:"ghost",onClick:()=>D("solutions"),isLoading:y==="solutions",leftIcon:e.jsx(A,{size:16}),className:"text-purple-600 hover:bg-purple-50",children:s("generate_with_ai")||"Generate with AI"}),e.jsx(_,{onClick:()=>{const t=`opt_${Date.now()}`,f=`res_${Date.now()}`;c(o=>{var j,d;return{...o,solutions:{options:[...((j=o.solutions)==null?void 0:j.options)||[],{id:t,text:"",correct:!1,resultId:f}]},simulation:{results:{...((d=o.simulation)==null?void 0:d.results)||{},[f]:{summary:"",detail:"",outcomeType:"neutral"}}}}})},leftIcon:e.jsx(q,{size:16}),size:"sm",children:s("add_option")})]})]}),e.jsxs("div",{className:"grid gap-4",children:[(V=l.solutions)==null?void 0:V.options.map((t,f)=>e.jsxs("div",{className:"bg-surface-50 p-4 rounded-xl border border-surface-200 relative group",children:[e.jsx("button",{onClick:()=>{var d,u;const o=[...((d=l.solutions)==null?void 0:d.options)||[]];o.splice(f,1);const j={...((u=l.simulation)==null?void 0:u.results)||{}};delete j[t.resultId],c(g=>({...g,solutions:{options:o},simulation:{results:j}}))},className:"absolute top-2 right-2 rtl:right-auto rtl:left-2 text-surface-400 hover:text-red-500 transition-colors",children:e.jsx(de,{size:16})}),e.jsxs("div",{className:"grid gap-3",children:[e.jsx(z,{label:`${s("option")} ${f+1}`,value:t.text,onChange:o=>{var d;const j=[...((d=l.solutions)==null?void 0:d.options)||[]];j[f].text=o.target.value,c(u=>({...u,solutions:{options:j}}))},placeholder:r==="he"?"תיאור הפתרון...":"Solution description..."}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.correct,onChange:o=>{var d;const j=[...((d=l.solutions)==null?void 0:d.options)||[]];j[f].correct=o.target.checked,c(u=>({...u,solutions:{options:j}}))},className:"w-4 h-4 rounded border-surface-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-surface-700",children:s("is_correct")})]}),e.jsxs("div",{className:"text-xs text-surface-400 font-mono bg-surface-100 px-2 py-1 rounded",children:["ID: ",t.resultId]})]})]})]},t.id)),(!((W=l.solutions)!=null&&W.options)||l.solutions.options.length===0)&&e.jsx("div",{className:"text-center py-8 text-surface-500 bg-surface-50 rounded-xl border border-dashed border-surface-300",children:r==="he"?"אין אפשרויות. הוסף אפשרות חדשה.":"No options. Add a new option."})]})]});case 6:return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsx("h3",{className:"text-xl font-bold text-surface-900",children:s("simulation_results")}),e.jsx("p",{className:"text-sm text-surface-500 mb-4",children:r==="he"?"הגדר את התוצאה עבור כל אפשרות פתרון שהוגדרה בשלב הקודם.":"Define the outcome for each solution option defined in the previous step."}),e.jsx("div",{className:"grid gap-6",children:(X=l.solutions)==null?void 0:X.options.map((t,f)=>{var j;const o=((j=l.simulation)==null?void 0:j.results[t.resultId])||{summary:"",detail:"",outcomeType:"neutral"};return e.jsxs("div",{className:"bg-surface-50 p-5 rounded-xl border border-surface-200",children:[e.jsxs("div",{className:"mb-4 pb-3 border-b border-surface-200 flex justify-between items-center",children:[e.jsxs("h4",{className:"font-bold text-surface-800 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-surface-200 flex items-center justify-center text-xs",children:f+1}),t.text||(r==="he"?"(ללא כותרת)":"(Untitled Option)")]}),e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-bold ${t.correct?"bg-emerald-100 text-emerald-700":"bg-surface-200 text-surface-600"}`,children:t.correct?s("correct"):s("incorrect")})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx(z,{label:s("result_summary"),value:o.summary,onChange:d=>{var g;const u={...((g=l.simulation)==null?void 0:g.results)||{}};u[t.resultId]={...o,summary:d.target.value},c(I=>({...I,simulation:{results:u}}))},placeholder:r==="he"?"כותרת התוצאה...":"Outcome headline..."}),e.jsx(L,{label:s("result_detail"),value:o.detail,onChange:d=>{var g;const u={...((g=l.simulation)==null?void 0:g.results)||{}};u[t.resultId]={...o,detail:d.target.value},c(I=>({...I,simulation:{results:u}}))},rows:3,placeholder:r==="he"?"תיאור מפורט של מה קרה בעקבות הבחירה...":"Detailed description of what happened..."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-semibold text-surface-700 mb-2",children:[s("outcome")," ",e.jsx("span",{className:"text-accent-500",children:"*"})]}),e.jsxs("select",{className:"w-full p-2.5 border border-surface-200 rounded-lg bg-white focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 transition-all",value:o.outcomeType,onChange:d=>{var g;const u={...((g=l.simulation)==null?void 0:g.results)||{}};u[t.resultId]={...o,outcomeType:d.target.value},c(I=>({...I,simulation:{results:u}}))},children:[e.jsx("option",{value:"success",children:r==="he"?"הצלחה":"Success"}),e.jsx("option",{value:"failure",children:r==="he"?"כישלון":"Failure"}),e.jsx("option",{value:"neutral",children:r==="he"?"ניטרלי":"Neutral"})]})]}),e.jsx(z,{label:s("image_url"),value:o.outcomeImageUrl||"",onChange:d=>{var g;const u={...((g=l.simulation)==null?void 0:g.results)||{}};u[t.resultId]={...o,outcomeImageUrl:d.target.value},c(I=>({...I,simulation:{results:u}}))},placeholder:"https://..."})]})]})]},t.id)})})]});case 7:return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-xl font-bold text-surface-900",children:s("reflection")}),e.jsx(_,{size:"sm",variant:"ghost",onClick:()=>D("reflection"),isLoading:y==="reflection",leftIcon:e.jsx(A,{size:16}),className:"text-purple-600 hover:bg-purple-50",children:s("generate_with_ai")||"Generate with AI"})]}),e.jsx("div",{className:"grid gap-4",children:e.jsx(L,{label:s("reflection_questions"),helperText:"Separate questions with a new line",value:(J=l.reflection)==null?void 0:J.questions.join(`
`),onChange:t=>w("reflection","questions",t.target.value.split(`
`)),rows:6})})]});default:return e.jsxs("div",{className:"text-center py-10",children:[e.jsx(ae,{size:48,className:"mx-auto text-secondary-500 mb-4"}),e.jsx("h3",{className:"text-xl font-bold text-surface-900",children:s("ready_to_create")}),e.jsx("p",{className:"text-surface-500",children:s("review_scenario")})]})}};return e.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-3xl border border-surface-200 shadow-xl overflow-hidden flex flex-col min-h-[600px]",children:[e.jsxs("div",{className:"p-8 border-b border-surface-100 flex justify-between items-center bg-surface-50/50",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-extrabold text-surface-900",children:s("create_new")}),e.jsxs("p",{className:"text-surface-500 text-sm",children:[s("step")," ",x," ",s("of")," 7"]})]}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5,6,7,8].map(n=>e.jsx("div",{className:`w-2 h-2 rounded-full transition-all ${x>=n?"bg-primary-600":"bg-surface-200"}`},n))})]}),e.jsx("div",{className:"p-8 flex-1 overflow-y-auto",children:ie()}),e.jsxs("div",{className:"p-6 border-t border-surface-100 bg-surface-50 flex justify-between items-center",children:[e.jsx(_,{variant:"ghost",onClick:()=>x===1?i():p(n=>Math.max(1,n-1)),children:s("back")}),x<8?e.jsx(_,{onClick:()=>p(n=>Math.min(8,n+1)),children:s("continue")}):e.jsx(_,{onClick:()=>a(l),variant:"secondary",leftIcon:e.jsx(oe,{size:18}),children:s("save_library")})]})]})},Re=()=>{const{t:a}=U(),[i,h]=N.useState([{id:1,name:"Alex Johnson",email:"alex@edu.com",role:"Teacher",status:"Active"},{id:2,name:"Sarah Connor",email:"sarah@admin.com",role:"Admin",status:"Active"},{id:3,name:"Mike Ross",email:"mike@law.com",role:"Teacher",status:"Inactive"},{id:4,name:"Jessica P.",email:"jess@edu.com",role:"Teacher",status:"Active"}]),s=()=>{const r={id:i.length+1,name:`New User ${i.length+1}`,email:`user${i.length+1}@edu.com`,role:"Teacher",status:"Active"};h([...i,r])};return e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-surface-900 tracking-tight",children:a("user_management")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-surface-400 rtl:left-auto rtl:right-3",size:16}),e.jsx("input",{type:"text",placeholder:a("search_users"),className:"pl-9 pr-4 rtl:pr-9 rtl:pl-4 py-2 bg-white border border-surface-200 rounded-lg text-sm focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500 outline-none"})]}),e.jsxs("button",{onClick:s,className:"bg-surface-900 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-surface-800 transition-colors",children:["+ ",a("add_user")]})]})]}),e.jsx("div",{className:"bg-white rounded-2xl border border-surface-200 shadow-sm overflow-hidden",children:e.jsxs("table",{className:"w-full text-left rtl:text-right text-sm text-surface-600",children:[e.jsx("thead",{className:"bg-surface-50 border-b border-surface-200 font-semibold text-surface-900",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4",children:a("name")}),e.jsx("th",{className:"px-6 py-4",children:a("role")}),e.jsx("th",{className:"px-6 py-4",children:a("status")}),e.jsx("th",{className:"px-6 py-4 text-right rtl:text-left",children:a("actions")})]})}),e.jsx("tbody",{className:"divide-y divide-surface-100",children:i.map(r=>e.jsxs("tr",{className:"hover:bg-surface-50/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary-100 text-primary-600 flex items-center justify-center font-bold",children:r.name[0]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-surface-900",children:r.name}),e.jsx("p",{className:"text-xs text-surface-400",children:r.email})]})]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium border ${r.role==="Admin"?"bg-primary-50 text-primary-700 border-primary-100":"bg-surface-50 text-surface-600 border-surface-100"}`,children:[r.role==="Admin"?e.jsx(ue,{size:10}):e.jsx(E,{size:10}),r.role]})}),e.jsx("td",{className:"px-6 py-4",children:e.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-full text-xs font-medium ${r.status==="Active"?"bg-secondary-50 text-secondary-700":"bg-surface-100 text-surface-500"}`,children:[r.status==="Active"?e.jsx(ae,{size:10}):e.jsx(he,{size:10}),r.status]})}),e.jsx("td",{className:"px-6 py-4 text-right rtl:text-left",children:e.jsx("button",{className:"text-surface-400 hover:text-primary-600 font-medium text-xs px-2",children:a("edit")})})]},r.id))})]})})]})},$e=()=>{var m,y,T,S,P;const{t:a,scenarios:i,language:h}=U(),s=h==="he",r=[{name:s?"א":"Mon",runs:12,completed:10},{name:s?"ב":"Tue",runs:19,completed:16},{name:s?"ג":"Wed",runs:15,completed:13},{name:s?"ד":"Thu",runs:22,completed:20},{name:s?"ה":"Fri",runs:28,completed:24},{name:s?"ו":"Sat",runs:8,completed:7},{name:s?"ש":"Sun",runs:5,completed:4}],x=[{name:a("completed"),value:85},{name:a("dropped"),value:15}],p=i.slice(0,5).map((l,c)=>({name:l.title.length>20?l.title.slice(0,20)+"...":l.title,sessions:Math.floor(Math.random()*100)+50,successRate:Math.floor(Math.random()*30)+70})),C=[{name:"Sarah Cohen",score:98,scenario:((m=i[0])==null?void 0:m.title)||"N/A"},{name:"David Levi",score:95,scenario:((y=i[1])==null?void 0:y.title)||"N/A"},{name:"Rachel Ben",score:94,scenario:((T=i[0])==null?void 0:T.title)||"N/A"},{name:"Moshe Gold",score:92,scenario:((S=i[2])==null?void 0:S.title)||"N/A"},{name:"Yael Katz",score:91,scenario:((P=i[1])==null?void 0:P.title)||"N/A"}];return e.jsxs("div",{className:"space-y-8 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-extrabold text-surface-900 tracking-tight",children:a("analytics")}),e.jsx("p",{className:"text-surface-500 text-sm mt-1",children:a("tooltip_analytics")})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{className:"px-4 py-2 bg-white border border-surface-200 rounded-xl text-sm font-medium focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500",children:[e.jsx("option",{children:a("this_week")}),e.jsx("option",{children:a("last_week")}),e.jsx("option",{children:a("this_month")}),e.jsx("option",{children:a("last_month")})]}),e.jsxs("button",{className:"px-4 py-2 bg-surface-900 text-white rounded-xl text-sm font-bold hover:bg-surface-800 transition-colors flex items-center gap-2",children:[e.jsx(pe,{size:16})," ",a("export")]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-surface-200 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-primary-100 rounded-lg text-primary-600",children:e.jsx(fe,{size:20})}),e.jsx("span",{className:"text-sm font-medium text-surface-500",children:a("total_sessions")})]}),e.jsx("p",{className:"text-4xl font-extrabold text-surface-900",children:"1,248"}),e.jsxs("div",{className:"mt-2 text-secondary-600 text-sm font-medium flex items-center gap-1",children:[e.jsx(O,{size:14})," ",e.jsx("span",{children:"+12%"})," ",e.jsx("span",{className:"text-surface-400",children:a("vs_last_week")})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-surface-200 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-secondary-100 rounded-lg text-secondary-600",children:e.jsx(Q,{size:20})}),e.jsx("span",{className:"text-sm font-medium text-surface-500",children:a("avg_score")})]}),e.jsx("p",{className:"text-4xl font-extrabold text-surface-900",children:"88%"}),e.jsxs("div",{className:"mt-2 text-secondary-600 text-sm font-medium flex items-center gap-1",children:[e.jsx(O,{size:14})," ",e.jsx("span",{children:"+4%"})," ",e.jsx("span",{className:"text-surface-400",children:a("vs_last_week")})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-surface-200 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:e.jsx(E,{size:20})}),e.jsx("span",{className:"text-sm font-medium text-surface-500",children:a("active_teachers")})]}),e.jsx("p",{className:"text-4xl font-extrabold text-surface-900",children:"342"}),e.jsxs("div",{className:"mt-2 text-surface-400 text-sm font-medium flex items-center gap-1",children:[e.jsx("span",{children:"+0%"})," ",e.jsx("span",{className:"text-surface-400",children:a("vs_last_week")})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-surface-200 shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"p-2 bg-accent-100 rounded-lg text-accent-600",children:e.jsx(je,{size:20})}),e.jsx("span",{className:"text-sm font-medium text-surface-500",children:a("avg_time")})]}),e.jsxs("p",{className:"text-4xl font-extrabold text-surface-900",children:["18",e.jsx("span",{className:"text-lg font-medium text-surface-400 ms-1",children:a("mins")})]}),e.jsxs("div",{className:"mt-2 text-accent-500 text-sm font-medium flex items-center gap-1",children:[e.jsx("span",{children:"-2"})," ",e.jsx("span",{className:"text-surface-400",children:a("vs_last_week")})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-surface-200 shadow-sm h-[400px]",children:[e.jsxs("h3",{className:"font-bold text-surface-800 mb-6 flex items-center gap-2",children:[e.jsx($,{size:20,className:"text-primary-500"}),a("weekly_activity")]}),e.jsx(H,{width:"100%",height:"85%",children:e.jsxs(Ne,{data:r,children:[e.jsx(ye,{strokeDasharray:"3 3",vertical:!1,stroke:"#f4f4f5"}),e.jsx(we,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#a1a1aa"}}),e.jsx(_e,{axisLine:!1,tickLine:!1,tick:{fill:"#a1a1aa"}}),e.jsx(Z,{cursor:{fill:"#f4f4f5"},contentStyle:{borderRadius:"12px",border:"none",boxShadow:"0 4px 6px -1px rgba(0,0,0,0.1)"}}),e.jsx(Ce,{}),e.jsx(ee,{dataKey:"runs",name:a("total_sessions"),fill:"#8b5cf6",radius:[4,4,0,0],barSize:24}),e.jsx(ee,{dataKey:"completed",name:a("completed"),fill:"#10b981",radius:[4,4,0,0],barSize:24})]})})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-surface-200 shadow-sm h-[400px]",children:[e.jsxs("h3",{className:"font-bold text-surface-800 mb-6 flex items-center gap-2",children:[e.jsx(te,{size:20,className:"text-primary-500"}),a("completion_rate")]}),e.jsx(H,{width:"100%",height:"75%",children:e.jsxs(Se,{children:[e.jsxs(ke,{data:x,innerRadius:70,outerRadius:100,paddingAngle:5,dataKey:"value",label:({name:l,percent:c})=>`${l} ${(c*100).toFixed(0)}%`,children:[e.jsx(se,{fill:"#10b981"}),e.jsx(se,{fill:"#f43f5e"})]}),e.jsx(Z,{})]})}),e.jsxs("div",{className:"flex justify-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-secondary-500"})," ",a("completed")," (85%)"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full bg-accent-500"})," ",a("dropped")," (15%)"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-surface-200 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-surface-800 mb-6 flex items-center gap-2",children:[e.jsx(re,{size:20,className:"text-primary-500"}),a("scenarios")," Performance"]}),e.jsx("div",{className:"space-y-4",children:p.map((l,c)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-surface-100 text-surface-500 flex items-center justify-center text-xs font-bold",children:c+1}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-center mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-surface-700",children:l.name}),e.jsxs("span",{className:"text-xs text-surface-500",children:[l.sessions," ",a("sessions_count")]})]}),e.jsx("div",{className:"h-2 bg-surface-100 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-primary-500 to-primary-600 rounded-full transition-all duration-500",style:{width:`${l.successRate}%`}})})]}),e.jsxs("span",{className:"text-sm font-bold text-surface-900",children:[l.successRate,"%"]})]},c))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-surface-200 shadow-sm",children:[e.jsxs("h3",{className:"font-bold text-surface-800 mb-6 flex items-center gap-2",children:[e.jsx(Q,{size:20,className:"text-accent-500"}),"Top Performers"]}),e.jsx("div",{className:"space-y-3",children:C.map((l,c)=>e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-surface-50 rounded-xl hover:bg-surface-100 transition-colors",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${c===0?"bg-accent-100 text-accent-600":c===1?"bg-surface-200 text-surface-600":c===2?"bg-accent-50 text-accent-700":"bg-surface-100 text-surface-500"}`,children:c+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-surface-900",children:l.name}),e.jsxs("p",{className:"text-xs text-surface-500",children:[l.scenario.slice(0,30),"..."]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-lg font-bold text-surface-900",children:l.score}),e.jsx("span",{className:"text-surface-400 text-sm",children:"%"})]})]},c))})]})]})]})},Ee=()=>{const{t:a}=U(),[i,h]=N.useState(!0),[s,r]=N.useState(!1);return e.jsxs("div",{className:"max-w-2xl space-y-8 animate-fade-in",children:[e.jsx("h2",{className:"text-3xl font-extrabold text-surface-900 tracking-tight",children:a("system_settings")}),e.jsxs("div",{className:"bg-white rounded-2xl border border-surface-200 shadow-sm divide-y divide-surface-100",children:[e.jsxs("div",{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-surface-900",children:a("email_notifications")}),e.jsx("p",{className:"text-sm text-surface-500",children:a("receive_reports")})]}),e.jsx("div",{className:`w-11 h-6 rounded-full relative cursor-pointer transition-colors ${i?"bg-primary-600":"bg-surface-200"}`,onClick:()=>h(!i),children:e.jsx("div",{className:`absolute top-1 w-4 h-4 bg-white rounded-full shadow-sm transition-all ${i?"right-1 rtl:right-auto rtl:left-1":"left-1 rtl:left-auto rtl:right-1"}`})})]}),e.jsxs("div",{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-surface-900",children:a("ai_model_config")}),e.jsx("p",{className:"text-sm text-surface-500",children:a("current_model")})]}),e.jsx("button",{className:"text-sm font-bold text-primary-600 hover:underline",children:a("change")})]}),e.jsxs("div",{className:"p-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-surface-900",children:a("data_export")}),e.jsx("p",{className:"text-sm text-surface-500",children:a("download_logs")})]}),e.jsx("button",{className:"bg-white border border-surface-200 text-surface-700 px-3 py-1.5 rounded-lg text-sm font-bold hover:bg-surface-50",children:a("export")})]})]})]})},R=({icon:a,label:i,active:h,onClick:s})=>e.jsxs("button",{onClick:s,className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${h?"bg-surface-900 text-white shadow-lg shadow-surface-200":"text-surface-500 hover:bg-surface-50 hover:text-surface-900"}`,children:[e.jsx(a,{size:20}),e.jsx("span",{className:"font-bold text-sm",children:i})]}),Ge=()=>{const{scenarios:a,addScenario:i,updateScenario:h,deleteScenario:s,t:r}=U(),[x,p]=N.useState("list"),[C,m]=N.useState(null),y=l=>{C?h(l):i(l),m(null),p("list")},T=l=>{m(l),p("create")},S=l=>{confirm(r("tooltip_delete_scenario"))&&s(l)},P=()=>{switch(x){case"create":return e.jsx(De,{initialData:C,onSave:y,onCancel:()=>{m(null),p("list")}});case"analytics":return e.jsx($e,{});case"users":return e.jsx(Re,{});case"settings":return e.jsx(Ee,{});default:return e.jsx(Ae,{onViewCreate:()=>{m(null),p("create")},onEdit:T,onDelete:S})}};return e.jsxs("div",{className:"grid grid-cols-12 gap-8",children:[e.jsx("div",{className:"col-span-12 md:col-span-3",children:e.jsxs("div",{className:"bg-white rounded-2xl border border-surface-200 p-4 h-fit sticky top-24 shadow-sm",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(R,{icon:ge,label:r("dashboard"),active:x==="list",onClick:()=>p("list")}),e.jsx(R,{icon:$,label:r("analytics"),active:x==="analytics",onClick:()=>p("analytics")}),e.jsx(R,{icon:q,label:r("new_scenario"),active:x==="create",onClick:()=>p("create")}),e.jsx("div",{className:"h-px bg-surface-100 my-2"}),e.jsx(R,{icon:E,label:r("users"),active:x==="users",onClick:()=>p("users")}),e.jsx(R,{icon:be,label:r("settings"),active:x==="settings",onClick:()=>p("settings")})]}),e.jsx("div",{className:"mt-8 pt-8 border-t border-surface-100 px-2 hidden md:block",children:e.jsxs("div",{className:"bg-gradient-to-br from-primary-600 to-primary-800 rounded-xl p-5 text-white shadow-lg shadow-primary-200",children:[e.jsx("p",{className:"text-xs font-medium text-primary-200 mb-1 uppercase tracking-wider",children:r("total_scenarios")}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("p",{className:"text-3xl font-bold",children:a.length}),e.jsx("span",{className:"text-xs text-primary-200",children:r("active_modules")})]})]})})]})}),e.jsx("div",{className:"col-span-12 md:col-span-9",children:P()})]})},Ve=()=>e.jsx(ve,{children:e.jsx(Ge,{})});export{Ve as component};
